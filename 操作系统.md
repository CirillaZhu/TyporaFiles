<center><b><div style = "font-size: 40px">操作系统



## L1 操作系统概述

### 什么是操作系统

Operation System（OS）

**操作系统是一个控制程序**

- 一个系统软件
- 控制程序执行过程，防止错误和计算机不当使用
- 执行用户程序，给用户程序提供各种服务
- 方便用户使用计算机系统

**操作系统是一个资源管理器**

- 应用程序与硬件之间的中间层
- 管理各种计算机软硬件资源
- 提供访问计算机软硬件资源的高效手段
- 解决资源访问冲突，确保资源公平使用

**操作系统的地位**

![image-20210901175007343](C:\Users\Yulin\AppData\Roaming\Typora\typora-user-images\image-20210901175007343.png)

**操作系统软件组成**

- Shell 命令行接口
- GUI 图形用户接口
  - WIMP（视窗，图表，菜单，指针）
  - 直接操作，所见即所得
- Kernel 操作系统内部
  - 执行各种资源管理功能

**ucore教学操作系统内核**

![image-20210901180733378](C:\Users\Yulin\AppData\Roaming\Typora\typora-user-images\image-20210901180733378.png)

**操作系统内核特征**

- 并发
  - 多个正在运行的程序，需要OS管理和调度
- 共享
  - 宏观上  ”同时“  访问，微观上互斥共享
- 虚拟
  - 利用多道程序设计技术，让每个用户都觉得有一个计算机为他服务
- 异步
  - 程序是走走停停的，向前推进的速度不可预知
  - 只要运行环境相同，OS需要保证程序运行的时间和结果一致

### 为什么要学操作系统

操作系统是计算机科学研究的基石之一

现有的操作系统不能满足所有需求，新的需求需要解决

### 操作系统实例与演变

Unix BSD-> Mac os

Linux -> 安卓：高开放性

Windows：基于Unix，图形接口和易用性，封闭

**操作系统为什么改变**

主要功能：硬件抽象和协调管理

原则：设计随着各种相关技术的改变而作出一定的改变

**操作系统的演变**

- 单用户系统
  - 操作系统 = 装载器 + 通用子程序库
  - 问题：昂贵组件，低利用率
- 批处理系统
  - 输入输出设备分担任务，计算机系统顺序处理
- 多程序系统
  - 保持多个工作在内存中，并且在各工作间复用cpu
- 分时
  - 每个进程定时中断，执行另一个进程，减少短程序等待时间
- 个人计算机：每个用户一个系统（易用性
  - 用户界面，多媒体功能
  - 演变
    - 最初：操作系统作为一个简单服务的提供者
    - 现在：支持协调和沟通的多应用系统
    - 安全问题（电子商务，医疗记录）
- 分布式计算：每个用户多个系统
  - 安全性，高可靠性
  - 网络支持成为重要功能
  - 通常支持分布式服务
    - 跨多系统数据共享和协调
  - 多个处理器
  - 高可用性与可靠性

### 操作系统结构

#### 简单结构

MS-DOS 最小的空间，设计用于提供大部分功能（1981-1994）

- 没有拆分为模块
- 用汇编编写
- 每个操作系统只针对特定的硬件平台
- 应用程序可能跳过操作系统，直接使用ROM BIOS 设备驱动

#### 分层结构

- 分为多层（levels）
  - 每层建立在低层之上
  - 最底层（layer 0）：硬件
  - 最高层（layer N）：用户界面
- 使用模块化，每一层仅使用下一层的功能和服务
- 可靠性进一步提高

##### UNIX操作系统和C语言

- 代码分为两部分
  - 与硬件平台无关的部分，高级语言实现
  - 与硬件平台密切相关的部分，用汇编语言实现
- 移植只需要更改汇编语言的部分

##### uCore操作系统结构

![image-20210902000216115](C:\Users\Yulin\AppData\Roaming\Typora\typora-user-images\image-20210902000216115.png)

#### 微内核结构（Microkernel）

- 尽可能把内核功能移到用户空间
- 用户间模块通讯使用消息传递
- 好处：灵活，安全
- 缺点：性能低

**目前的操作系统是分层与微内核结构的混合体**

#### 外核结构 Exokernel

- 内核分配及

![image-20210902000511292](C:\Users\Yulin\AppData\Roaming\Typora\typora-user-images\image-20210902000511292.png)



#### VMM（虚拟机管理器）

![image-20210902000554737](C:\Users\Yulin\AppData\Roaming\Typora\typora-user-images\image-20210902000554737.png)

![image-20210902000634760](C:\Users\Yulin\AppData\Roaming\Typora\typora-user-images\image-20210902000634760.png)

- 管理器负责资源的隔离，操作系统负责资源的管理

